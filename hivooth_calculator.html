<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•˜ì´ë¶€ìŠ¤ ì˜ˆì‚° ì‚°ì¶œí•˜ê¸°</title>

    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

    <style>
        /* CSS: ë””ìì¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f4f7f6;
            color: #333;
        }
        .calculator-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        .input-group {
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .input-group label {
            flex: 2;
            font-weight: bold;
        }
        .input-group input[type="text"], .input-group select {
            flex: 3;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .result-box {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #FF5B1A; 
            border-radius: 8px;
            background-color: #fff4f1;
            text-align: center;
        }
        .result-box h3 {
            margin-top: 0;
            color: #FF5B1A;
        }
        .total-price-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin: 10px 0;
            height: 40px;
        }
        .total-price {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
            line-height: 1;
        }
        .alpha-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #e74c3c;
            margin-left: 5px;
            line-height: 1;
        }
        .detail-item {
            display: flex;
            justify-content: space-between;
            border-top: 1px dashed #ccc;
            padding-top: 5px;
            margin-top: 5px;
            font-size: 0.9em;
        }
        .discount-item {
            color: #27ae60;
            font-weight: bold;
            border-top: 1px dashed #ccc;
            padding-top: 5px;
            margin-top: 5px;
        }
        .notice {
            margin-top: 20px;
            font-size: 0.8em;
            color: #999;
            text-align: left;
        }
        .notice ul {
            padding-left: 20px;
        }
        .notice strong { 
            font-weight: bold;
            color: #555;
        }
        .calculated-days {
            font-size: 1.1em;
            color: #3498db;
            font-weight: bold;
            text-align: right;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <div class="calculator-container">
        <h2>ğŸ’° í•˜ì´ë¶€ìŠ¤ ì˜ˆì‚° ì‚°ì¶œí•˜ê¸°</h2>

        <div class="input-group">
            <label for="startDate">ëŒ€ì—¬ ì‹œì‘ì¼</label>
            <input type="text" id="startDate" readonly>
        </div>
        <div class="input-group">
            <label for="endDate">ëŒ€ì—¬ ì¢…ë£Œì¼</label>
            <input type="text" id="endDate" readonly>
        </div>
        
        <div class="calculated-days" id="daySummary">ì´ ëŒ€ì—¬ì¼ìˆ˜: 0ì¼</div>
        
        <div class="input-group">
            <label for="boothQty">í•˜ì´ ë¶€ìŠ¤ ê°œìˆ˜ (1ë™ ê¸°ì¤€)</label>
            <select id="boothQty"></select>
        </div>
        <div class="input-group">
            <label for="coverQty">ì˜†ê°€ë¦¼ë§‰ ì„¸íŠ¸ ê°œìˆ˜ (6ë©´)</label>
            <select id="coverQty"></select>
        </div>
        <div class="input-group">
            <label for="lightQty">ë¼ì¸ ì¡°ëª… ì„¸íŠ¸ ê°œìˆ˜</label>
            <select id="lightQty"></select>
        </div>
        <div class="input-group">
            <label for="region">ìš´ì†¡ ì§€ì—­</label>
            <select id="region">
                <option value="seoulGyeonggi" selected>ì„œìš¸/ê²½ê¸° (ê¸°ë³¸)</option>
                <option value="other">ê·¸ ì™¸ ì§€ì—­</option>
            </select>
        </div>

        <div class="result-box">
            <h3>âœ… ì˜ˆìƒ ì´ ê²¬ì </h3>
            <div id="resultDetails"></div>
            <div class="total-price-container">
                <div class="total-price" id="totalPrice">0 ì›</div>
                <div id="alphaText" class="alpha-text" style="display:none;">+Î±</div>
            </div>
        </div>

        <div class="notice">
            <p>â€» ì£¼ì˜ ì‚¬í•­:</p>
            <ul>
                <li>ë³¸ ê¸ˆì•¡ì€ <strong>ì •ê°€ ê¸°ì¤€</strong>ìœ¼ë¡œ ê³„ì‚°ë˜ì—ˆìœ¼ë©°, í”„ë¡œëª¨ì…˜ í• ì¸ì´ ì ìš©ëœ ìµœì¢… ê¸ˆì•¡ì…ë‹ˆë‹¤.</li>
                <li>ëŒ€ì—¬ì¼ ê¸°ì¤€ ì•ë’¤ë¡œ ê° 1ì¼ì˜ ì„¤ì¹˜, ì² ìˆ˜ê¸°ê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
                <li>ìš´ì†¡ë¹„ëŠ” ì„¤ì¹˜ì™€ ì² ìˆ˜ ë¹„ìš©ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
                <li>ìš´ì†¡ë¹„ëŠ” ì„œìš¸/ê²½ê¸° ê¸°ë³¸ ìš”ê¸ˆì´ ê¸°ì¤€ì´ë©°, ì„¤ì¹˜/ì² ìˆ˜ ì¥ì†Œì˜ ì‘ì—… í™˜ê²½ì— ë”°ë¼ <strong>ë³„ë„ì˜ ì‘ì—…ë¹„</strong>ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œìš¸/ê²½ê¸° ì™¸ ì§€ì—­ì˜ ìš´ì†¡ë¹„ëŠ” ë³„ë„ ë¬¸ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</li>
                <li><strong>ìµœì¢… ê²¬ì </strong>ì€ VAT ë° ì·¨ì†Œ/í™˜ë¶ˆ ê·œì • ë“±ì„ í¬í•¨í•˜ì—¬ ê³„ì•½ì„œë¡œ í™•ì¸í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.</li>
            </ul>
        </div>
    </div>

    <script>
        // JavaScript: ê³„ì‚° ë¡œì§ ë° ìº˜ë¦°ë”/ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
        
        // 1. ìƒìˆ˜ ì •ì˜
        const PRICE_BOOTH_REGULAR_PER_DAY = 200000;
        const PRICE_BOOTH_DISCOUNT = 100000;
        const PRICE_COVER = 20000;
        const PRICE_LIGHT = 30000;
        const MAX_QTY = 20;
        const SHIPPING_RATES = {
            '1_to_10': 250000,
            '11_to_20': 400000
        };

        // 2. ìˆ˜ëŸ‰ ë“œë¡­ë‹¤ìš´ ì˜µì…˜ ìƒì„± í•¨ìˆ˜
        function populateQuantityDropdowns() {
            const qtyDropdowns = ['boothQty', 'coverQty', 'lightQty'];
            qtyDropdowns.forEach(id => {
                const selectEl = document.getElementById(id);
                
                // 0ê°œ ì˜µì…˜ ì¶”ê°€
                if (id !== 'boothQty') {
                    const optionZero = document.createElement('option');
                    optionZero.value = 0;
                    optionZero.textContent = '0 ê°œ';
                    selectEl.appendChild(optionZero);
                }

                // 1ë¶€í„° MAX_QTYê¹Œì§€ ì˜µì…˜ ìƒì„±
                for (let i = 1; i <= MAX_QTY; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + ' ê°œ';
                    selectEl.appendChild(option);
                }
            });
        }
        
        // 3. ìº˜ë¦°ë” ì´ˆê¸°í™” ë° ì„¤ì • (jQuery UI)
        function initializeDatepickers() {
            const startDateEl = $('#startDate');
            const endDateEl = $('#endDate');

            $.datepicker.setDefaults({
                dateFormat: 'yy-mm-dd',
                minDate: 0,
                monthNames: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'],
                dayNamesMin: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ']
            });

            startDateEl.datepicker({
                onSelect: function(selectedDate) {
                    endDateEl.datepicker('option', 'minDate', selectedDate);
                    calculateEstimate();
                }
            });

            endDateEl.datepicker({
                onSelect: function(selectedDate) {
                    calculateEstimate();
                }
            });
            
            // ì´ˆê¸°ê°’ ì„¤ì •
            startDateEl.datepicker('setDate', '2025-12-05');
            endDateEl.datepicker('setDate', '2025-12-07');
        }

        // 4. ë‚ ì§œ ì°¨ì´ ê³„ì‚° ë° ìš”ì•½ í•¨ìˆ˜
        function getRentalDays() {
            const startDate = $('#startDate').datepicker('getDate');
            const endDate = $('#endDate').datepicker('getDate');
            const daySummaryEl = document.getElementById('daySummary');
            
            if (!startDate || !endDate) {
                daySummaryEl.textContent = 'ì´ ëŒ€ì—¬ì¼ìˆ˜: 0ì¼';
                return 0;
            }

            const diffTime = Math.abs(endDate.getTime() - startDate.getTime());
            const oneDay = 1000 * 60 * 60 * 24;
            const rentalDays = Math.ceil(diffTime / oneDay) + 1;
            
            daySummaryEl.innerHTML = `ì´ ëŒ€ì—¬ì¼ìˆ˜: ${rentalDays}ì¼`;
            return rentalDays;
        }


        // 5. ê³„ì‚° í•¨ìˆ˜
        function calculateEstimate() {
            const rentalDays = getRentalDays();
            
            if (rentalDays <= 0) {
                document.getElementById('totalPrice').textContent = "ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.";
                document.getElementById('resultDetails').innerHTML = "";
                document.getElementById('alphaText').style.display = 'none'; 
                return;
            }

            const boothQty = parseInt(document.getElementById('boothQty').value) || 0;
            const coverQty = parseInt(document.getElementById('coverQty').value) || 0;
            const lightQty = parseInt(document.getElementById('lightQty').value) || 0;
            const region = document.getElementById('region').value;

            // A. ì •ê°€ ê³„ì‚° ë° í• ì¸ ê¸ˆì•¡ ê³„ì‚°
            const boothRegularPrice = boothQty * PRICE_BOOTH_REGULAR_PER_DAY * rentalDays;
            const boothDiscount = boothQty * PRICE_BOOTH_DISCOUNT * rentalDays * -1; // ë§ˆì´ë„ˆìŠ¤ ê°’

            // B. ìš´ì†¡ë¹„ ê³„ì‚°
            let shippingPrice = 0;
            let shippingDetailText = 'ì„œìš¸/ê²½ê¸° ê¸°ì¤€';
            let needsAlpha = false; 

            if (boothQty >= 1 && boothQty <= 10) {
                shippingPrice = SHIPPING_RATES['1_to_10'];
            } else if (boothQty >= 11 && boothQty <= 20) {
                shippingPrice = SHIPPING_RATES['11_to_20'];
            } else if (boothQty > 20) {
                shippingPrice = SHIPPING_RATES['11_to_20']; 
                needsAlpha = true; 
            }

            if (region === 'other') {
                shippingDetailText = 'ê¸°ë³¸ ë¹„ìš© + ì¶”ê°€ ë¹„ìš© ë°œìƒ'; 
                needsAlpha = true; 
            }
            
            // C. ê¸°íƒ€ ì˜µì…˜ ë¹„ìš© (0ê°œ ì„ íƒ ì‹œ 0ì›)
            const coverPrice = coverQty * PRICE_COVER;
            const lightPrice = lightQty * PRICE_LIGHT;

            // D. ìµœì¢… í•©ì‚°
            const totalEstimate = boothRegularPrice + boothDiscount + shippingPrice + coverPrice + lightPrice;
            
            // 6. ê²°ê³¼ ì¶œë ¥ í¬ë§·
            const formatPrice = (price) => price.toLocaleString('ko-KR') + ' ì›';

            let detailsHTML = `
                <div class="detail-item"><span>í•˜ì´ ë¶€ìŠ¤ ëŒ€ì—¬ë£Œ ì •ê°€ (${boothQty}ë™ x ${rentalDays}ì¼)</span><span>${formatPrice(boothRegularPrice)}</span></div>
                <div class="discount-item detail-item"><span>í”„ë¡œëª¨ì…˜ í• ì¸ (-50%)</span><span>${formatPrice(boothDiscount)}</span></div>
                <div class="detail-item"><span>ìš´ì†¡ë¹„ (${shippingDetailText})</span><span>${formatPrice(shippingPrice)}</span></div>
                ${coverPrice !== 0 ? `<div class="detail-item"><span>ì˜†ê°€ë¦¼ë§‰ (${coverQty}ì„¸íŠ¸)</span><span>${formatPrice(coverPrice)}</span></div>` : ''}
                ${lightPrice !== 0 ? `<div class="detail-item"><span>ë¼ì¸ ì¡°ëª… (${lightQty}ì„¸íŠ¸)</span><span>${formatPrice(lightPrice)}</span></div>` : ''}
            `;
            
            document.getElementById('totalPrice').textContent = formatPrice(totalEstimate);
            document.getElementById('resultDetails').innerHTML = detailsHTML;
            
            document.getElementById('alphaText').style.display = needsAlpha ? 'block' : 'none';
        }

        // 7. ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        $(function() {
            populateQuantityDropdowns();
            initializeDatepickers();
            
            $('#boothQty, #coverQty, #lightQty, #region').on('change', calculateEstimate);
            
            // ì´ˆê¸°ê°’ ì„¤ì • ë° ê³„ì‚°
            $('#boothQty').val('10');
            $('#coverQty').val('0');
            $('#lightQty').val('0');
            calculateEstimate();
        });
    </script>
</body>
</html>